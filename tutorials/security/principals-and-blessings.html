<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,
                                   initial-scale=1,
                                   minimum-scale=1,
                                   maximum-scale=1,
                                   user-scalable=no,
                                   minimal-ui">
  
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
  
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
    <title>Principals and Blessings - Vanadium</title>
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,400,400italic,500,500italic,700,700italic|Source+Code+Pro">
  
    <link rel="stylesheet" href="/css/github.css">
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  
    <script src="/js/react-0.14.3.min.js"></script>
    <script src="/js/react-dom-0.14.3.min.js"></script>
  
    <link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="160x160" href="/favicons/favicon-160x160.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/favicon-192x192.png">
    <meta name="msapplication-TileColor" content="#00acc1">
    <meta name="msapplication-TileImage" content="/favicons/mstile-144x144.png">
  
    <link rel="stylesheet" href="/css/bundle.css">
    <script src="/js/bundle.js"></script>
  </head>
  <body>
    <header class="mdl-shadow--2dp">
      <div class="row">
        <div class="icon menu"><i class="material-icons">menu</i></div>
        <div class="icon v-icon"><img src="/images/v-icon-white.svg"></div>
        <div class="logo"><a href="/">Vanadium</a></div>
        <div class="spacer"></div>
        <nav>
          <a href="/">Overview</a>
          <a href="/installation/">Installation</a>
          <a href="/tutorials/hello-world.html">Tutorials</a>
        </nav>
      </div>
    </header>
    <div class="sidebar"></div>
    <div class="sidebar-data">
      <a href="/">Overview</a>
      <a href="/installation/">Installation</a>
    
      <a href="#" class="nav">Tutorials</a>
      <nav>
        <a href="/tutorials/hello-world.html">Hello World</a>
        <a href="/tutorials/basics.html">Client/Server Basics</a>
    
        <a href="#" class="nav">Security</a>
        <nav>
          <a href="/tutorials/security/">Overview</a>
          <a href="/tutorials/security/principals-and-blessings.html">Principals and Blessings</a>
      <a href="/tutorials/security/permissions-authorizer.html">Permissions Authorizer</a>
      <a href="/tutorials/security/first-party-caveats.html">Caveats</a>
      <a href="/tutorials/security/third-party-caveats.html">Third-party Caveats</a>
      <a href="/tutorials/security/agent.html">The Agent</a>
      <a href="/tutorials/security/custom-authorizer.html">Custom Authorizer</a>
    </nav>
    
        <a href="#" class="nav">Naming</a>
        <nav>
          <a href="/tutorials/naming/">Overview</a>
          <a href="/tutorials/naming/mount-table.html">The Mount Table</a>
      <a href="/tutorials/naming/namespace.html">Namespaces</a>
      <a href="/tutorials/naming/suffix-part1.html">The Suffix - Part I</a>
      <a href="/tutorials/naming/suffix-part2.html">The Suffix - Part II</a>
      <a href="/tutorials/naming/globber.html">Globber</a>
    </nav>
    
        <a href="#" class="nav">Java</a>
        <nav>
          <a href="/tutorials/java/">Overview</a>
          <a href="/tutorials/java/fortune.html">Fortune in Java</a>
      <a href="/tutorials/java/android.html">Location Service in Android</a>
    </nav>
    
        <a href="#" class="nav">JavaScript</a>
        <nav>
          <a href="/tutorials/javascript/">Overview</a>
          <a href="/tutorials/javascript/hellopeer.html">Hello Peer</a>
      <a href="/tutorials/javascript/fortune.html">Fortune in JS</a>
      <a href="/tutorials/javascript/security.html">Security in JS</a>
    </nav>
    
        <a href="/tutorials/faq.html">Tutorial FAQ</a>
      </nav>
    
      <a href="#" class="nav">Concepts</a>
      <nav>
        <a href="/concepts/rpc.html">RPC System</a>
    <a href="/concepts/naming.html">Naming</a>
    <a href="/concepts/security.html">Security</a>
    <a href="/concepts/device-management.html">Device Management</a>
    <a href="/concepts/syncbase-overview.html">Syncbase</a>
  </nav>
    
      <a href="/example-apps.html">Example Apps</a>
      <a href="/api-reference.html">API Reference</a>
    
      <a href="#" class="nav">Community</a>
      <nav>
        <a href="/community/coding-guidelines.html">Coding Guidelines</a>
    <a href="/community/contributing.html">Contributing</a>
  </nav>
    
      <a href="#" class="nav">Tools</a>
      <nav>
        <a href="/tools/identity-service-faq.html">Vanadium Identity Service</a>
    <a href="/tools/jiri.html">Jiri</a>
    <a href="/tools/services.html">Vanadium Cloud Services</a>
    <a href="/tools/vanadium-chrome-extension.html">Vanadium Chrome Extension</a>
  </nav>
    
      <a href="#" class="nav">Design Docs</a>
      <nav>
        <a href="/designdocs/authentication.html">Authentication Protocol</a>
    <a href="/designdocs/identity-service.html">Identity Service</a>
    <a href="/designdocs/vdl-spec.html">VDL Specification</a>
    <a href="/designdocs/vom-spec.html">VOM Specification</a>
  </nav>
    
      <a href="/glossary.html">Glossary</a>
      <a href="/faq.html">FAQ</a>
      <a href="/tos.html">Terms of Service</a>
    </div>
    <main>
      <h1 class="title">
        
        Principals and Blessings
      </h1>

      <p class="wherein"><strong>Wherein</strong> Alice and her friend Bob take the stage to demonstrate inter-principal communication.</p>

      <div class="toc"></div>

      <div class="prerequisites">
      <div class="note info"><p><strong>Prerequisites</strong>:<br>
All tutorials require Vanadium <a href="/installation/">installation</a>, and must run in a <a href="/tutorials/faq.html#why-bash-">bash shell</a>.
<br>Further, please <a href="/sh/scenario-b-setup.sh" download="scenario-b-setup.sh"> download this script</a> then <a href="/tutorials/faq.html#why-source-">source</a> it:</p>
<pre><code>source ~/Downloads/scenario-b-setup.sh
</code></pre><p>This command wipes tutorial files and defines shell environment variables. If you start a new terminal, and just want to re-establish the environment, see instructions <a href="/tutorials/setup.html">here</a>.
</p>
<p></p>
<p></p>
</div>
</div>

      <h1 id="principals">Principals</h1>
<p>A <a href="/glossary.html#principal"><em>principal</em></a> in the Vanadium framework is simply a public and
private <a href="http://en.wikipedia.org/wiki/Public-key_cryptography">key pair</a>. It has a set of human-readable names bound to it
using public-key certificate chains, called <a href="/glossary.html#blessing"><em>blessings</em></a>.
All Vanadium processes act on behalf of a principal and are authorized by
other processes based on the blessing names bound to the principal.</p>
<p>For example a principal <em>Alice</em> may have the blessings <code>alice</code> and
<code>bob:houseguest</code> bound to it. A process running on behalf of Alice
may authenticate to others as either <code>alice</code> or <code>bob:houseguest</code> or both.</p>
<p>A principal and the set of blessings bound to it, are together
referred to as <em>credentials</em>.  The <a href="/tutorials/basics.html">basics tutorial</a> demonstrated that
a client and server can talk to each other if they run with the <em>same
credentials</em>.</p>
<p>To reiterate this, create two principals Alice and Bob with blessings
<code>alice</code> and <code>bob</code> bound to them respectively:</p>
<!-- @makeAliceAndBob @test @completer -->
<pre><code>$V_BIN/principal create --overwrite $V_TUT/cred/alice alice
$V_BIN/principal create --overwrite $V_TUT/cred/bob bob
</code></pre><p>Run the server with Alice&#39;s credentials (i.e, authenticate as <code>alice</code>):</p>
<!-- @runServerAsAlice @test @sleep -->
<pre><code>kill_tut_process TUT_PID_SERVER
$V_TUT/bin/server \
    --v23.credentials $V_TUT/cred/alice \
    --endpoint-file-name $V_TUT/server.txt &amp;
TUT_PID_SERVER=$!
</code></pre><p>then make a request as Alice:</p>
<!-- @runClientAsAlice @test -->
<pre><code>$V_TUT/bin/client \
    --v23.credentials $V_TUT/cred/alice \
    --server `cat $V_TUT/server.txt`
</code></pre><p>then make a request as Bob (it should fail):</p>
<pre><code>$V_TUT/bin/client \
    --v23.credentials $V_TUT/cred/bob \
    --server `cat $V_TUT/server.txt`
</code></pre><p>The reason the request from Alice succeeds and that from Bob
fails is because of the Default Authorization Policy used by
the server.</p>
<p><img src="/images/tut/security01-alice-succeeds-bob-fails.svg" alt="Alice&#39;s request to the server succeeds, but Bob&#39;s request fails"></p>
<h1 id="default-authorization-policy">Default authorization policy</h1>
<p>In the absence of any explicit indications by the developer, Vanadium
services use the following default policy:</p>
<blockquote>
<p><em>Servers authorize clients if the client&#39;s blessings are an extension of the server&#39;s,
or the server&#39;s blessings are an extension of the client&#39;s.</em></p>
</blockquote>
<p>For example, a server that presents the blessing <code>alice:hometv</code> to
clients will authorize only clients that present either <code>alice</code>, or <code>alice:hometv</code>,
 or <code>alice:hometv:app</code>, etc. to the server.</p>
<p>In the sample run above, <em>Alice the server</em> recognizes <em>Alice the client</em> as herself
(same principal and blessing), and therefore grants access under the default authorization
policy.</p>
<p>Under the same policy, Alice&#39;s server rejects Bob&#39;s request, as neither <code>alice</code>
nor <code>bob</code> is an extension of the other.</p>
<h1 id="blessings">Blessings</h1>
<p>Per the default authorization policy, Bob&#39;s request to Alice&#39;s server would
succeed if he had a blessing of the form <code>alice:&lt;something&gt;</code>. Such a blessing
can be created by Alice by <em>blessing</em> Bob.</p>
<p>A principal can <em>bless</em> another principal by extending a subset
of its own blessings and create a blessing for the other principal.
This operation can be carried out by the <code>principal</code> command:</p>
<!-- @aliceBlessBobAsFriend @test @completer -->
<pre><code>$V_BIN/principal bless \
    --v23.credentials $V_TUT/cred/alice \
    --for=24h $V_TUT/cred/bob friend:bob | \
        $V_BIN/principal \
            --v23.credentials $V_TUT/cred/bob \
            set forpeer - alice
</code></pre><p>In the first invocation of <code>principal</code>, Alice creates a blessing for Bob
named <code>alice:friend:bob</code>. A blessing can carry an expiry time (along with
other restrictions, explained in subsequent tutorials) after which it is
no longer valid.</p>
<p>The second invocation takes that blessing off the pipe and
stores it for later use by Bob when talking to Alice&#39;s server.</p>
<div class="note info"><h2 id="alice-and-bob-would-typically-be-on-different-devices-">Alice and Bob would typically be on different devices.</h2>
<p>A blessing does not contain any private keys and is useful only to the one
blessed, so it could be transferred via email without compromising its purpose.</p>
<p>Blessings are transferred via pipes in this tutorial for educational brevity.
Later tutorials will show (with more coding details) how a blessing can directly
accompany the request that the blessing authorizes.</p>
</div>

<p><img src="/images/tut/security02-alice-blesses-bob.svg" alt="Alice blesses Bob as a friend"></p>
<p>Because Bob has stored the new blessing with his credentials,
the same request from Bob that previously failed now succeeds:</p>
<!-- @clientAsBob @test -->
<pre><code>$V_TUT/bin/client \
    --v23.credentials $V_TUT/cred/bob \
    --server `cat $V_TUT/server.txt`
</code></pre><p><img src="/images/tut/security03-alice-bob-succeed.svg" alt="Bob&#39;s request to the server succeeds"></p>
<p>We&#39;re done with the server now.</p>
<!-- @killServer @test -->
<pre><code>kill_tut_process TUT_PID_SERVER
</code></pre><h1 id="steps-to-authentication">Steps to authentication</h1>
<p>In Vanadium, a remote procedure call is a multi-step process
authentication based on blessings:</p>
<ul>
<li><p>The client knocks on the door with an initial, ping-like request
that reveals little to the not-yet trusted server.</p>
</li>
<li><p>The server responds with one or more blessings - the server is
saying <em>who it is</em>.  A blessing is an identity.</p>
<p>Above, the server sends its blessing <code>alice</code>.  This allows the
client to establish the server&#39;s identity before revealing any
further information about the client&#39;s intent.</p>
</li>
<li><p>Based on the received blessings, the client choses which (if any) of
its blessings to reveal to the server, and sends them along with
its service request.</p>
<p>Above, Bob&#39;s client sent back two blessings: <code>bob</code> and
<code>alice:friend:bob</code>.  The former is always sent, and the latter is
sent to any server identifying itself as <code>alice</code>.</p>
</li>
<li><p>If the server authorizes the request for the given blessings, it
executes the service call and returns results.</p>
<p>Above, the blessing <code>alice:friend:bob</code> (originally generated by
alice and stored by bob) has authorization, so Bob gets his fortune.</p>
</li>
</ul>
<h1 id="summary">Summary</h1>
<ul>
<li><p>Alice and Bob have been established as <a href="/glossary.html#principal">principals</a>.</p>
</li>
<li><p>Alice ran a server, which Bob couldn&#39;t talk to.  Without changing
anything about the runner server, Alice <a href="/glossary.html#blessing">blessed</a> Bob and
Bob could talk to Alice&#39;s server.</p>
</li>
<li><p>The default authorization policy lets anyone that Alice blesses talk
to her without restriction.</p>
</li>
<li><p>The <code>principal</code> program reports credentials data</p>
<ul>
<li><code>principal dump</code> summarizes credentials.</li>
<li><code>principal get</code> drills into credential details.</li>
<li><code>principal dumpblessings</code> reports the detailed <a href="/glossary.html#certificate">certificate</a>
chains that comprise blessings.</li>
</ul>
</li>
</ul>
<h1 id="appendix-reporting-credentials">Appendix:  Reporting credentials</h1>
<div class="note info"><p>Feel free to skim this, and refer back to it from later tutorials as
the need arises.</p>
</div>

<p>This section reviews commands that display data from a principal&#39;s
credentials.  The <code>principal</code> subcommands shown here are handy to use
in all subsequent tutorials.</p>
<h2 id="alice">Alice</h2>
<p>The <code>dump</code> command summarizes a principal&#39;s credentials:</p>
<!-- @principalAliceDump @test -->
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/alice \
    dump
</code></pre><p>This results in something like:</p>
<pre><code class="noclipboard nohighlight">Public key : 0a:e3:61:0e:3e:ec:9c:ce:ed:04:c1:c6:58:78:28:a8
---------------- BlessingStore ----------------
Default blessings: alice
Peer pattern                   : Blessings
...                            : alice
---------------- BlessingRoots ----------------
Public key                                      : Pattern
0a:e3:61:0e:3e:ec:9c:ce:ed:04:c1:c6:58:78:28:a8 : [alice]</code></pre>

<p>This output and its individual components are described below.</p>
<h3 id="public-key">Public key</h3>
<p>The <code>Public key</code> line shows the public half of Alice&#39;s public/private
key pair.  Isolate it as follows:</p>
<!-- @principalAliceGetPublicKey @test -->
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/alice \
    get publickey --pretty
</code></pre><h3 id="blessings-presented-as-server">Blessings presented as server</h3>
<p>The <code>Default blessings</code> line shows the blessings that the principal
will use when it <em>acts as a server</em> responding to a client.</p>
<p>These blessings will be revealed to all clients of the server,
regardless of the blessings presented by the client.</p>
<p>There can be more than one blessing; a principal can play multiple
roles - phone, music player, email client, etc.</p>
<p>Examine them as follows:</p>
<!-- @principalAliceGetDefault @test -->
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/alice \
    get default -names
</code></pre><h3 id="blessings-presented-as-a-client">Blessings presented as a client</h3>
<p>Below the headings <code>Peer pattern | Blessings</code> are the blessings used
when the principal <em>acts as a client</em>, sending its credentials to a
server.</p>
<p>This is a <em>peer map</em>.  The client takes the blessing that came from
the server, matches it to <a href="/glossary.html#blessing-pattern">patterns</a> on the left, and responds to the
server using the blessings on the right.</p>
<p>Examine the map as follows:
<!-- @principalAliceGetPeerMap @test --></p>
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/alice \
    get peermap
</code></pre><p>The pattern <code>...</code> matches on all servers, so the name <code>alice</code> (the
name associated with her <a href="/glossary.html#self-blessing">self-blessing</a>) is provided to all servers.</p>
<h3 id="recognized-roots">Recognized roots</h3>
<p>The <code>BlessingRoots</code> section displays all
<a href="/glossary.html#blessing-root">root public keys</a> recognized by this principal.  The
blessing name patterns following a given public key are trusted if
they are presented by a principal with the given key.</p>
<p>Report just the recognized roots with:
<!-- @principalAliceGetRoots @test --></p>
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/alice \
    get recognizedroots
</code></pre><p>There&#39;s only one key here because currently <code>alice</code> only recognizes
herself.</p>
<h2 id="bob">Bob</h2>
<p>The situation for Bob is slightly different:</p>
<!-- @principalBobDump @test -->
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/bob \
    dump
</code></pre><p>Example output:</p>
<pre><code class="noclipboard nohighlight">Public key : 8e:03:13:7b:f1:57:28:11:87:f0:e8:90:3b:5c:5f:fe
---------------- BlessingStore ----------------
Default blessings: bob
Peer pattern                   : Blessings
...                            : bob
alice                          : alice:friend:bob
---------------- BlessingRoots ----------------
Public key                                      : Pattern
0a:e3:61:0e:3e:ec:9c:ce:ed:04:c1:c6:58:78:28:a8 : [alice]
8e:03:13:7b:f1:57:28:11:87:f0:e8:90:3b:5c:5f:fe : [bob]</code></pre>

<h3 id="public-key">Public key</h3>
<p>Critically, Bob has a different public key from Alice:</p>
<!-- @comparePublicKeys @test -->
<pre><code>keyAlice=`$V_BIN/principal \
    --v23.credentials $V_TUT/cred/alice \
    get publickey --pretty`
keyBob=`$V_BIN/principal \
    --v23.credentials $V_TUT/cred/bob \
    get publickey --pretty`
echo -e &quot;alice   $keyAlice\n  bob   $keyBob&quot;
</code></pre><h3 id="blessings-presented-as-server">Blessings presented as server</h3>
<p>Bob will report himself to clients as <code>bob</code>:</p>
<!-- @principalBobGetDefault @test -->
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/bob \
    get default -names
</code></pre><h3 id="blessings-presented-as-a-client">Blessings presented as a client</h3>
<p>Bob&#39;s peer map shows that he has stored a blessing <code>alice:friend:bob</code>
that is sent only to servers that have identified themselves as
<code>alice</code>.</p>
<!-- @principalBobGetPeerMap @test -->
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/bob \
    get peermap
</code></pre><p>Bob also sends his <a href="/glossary.html#self-blessing">self-blessing</a> <code>bob</code> to everyone.</p>
<h3 id="recognized-roots">Recognized roots</h3>
<p>Bob, as a side effect of accepting a blessing from Alice, <em>remembers</em>
Alice&#39;s public key and will trust a principal claiming to be
<code>alice</code> only if it presents that public key.</p>
<!-- @principalBobGetRoots @test -->
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/bob \
    get recognizedroots
</code></pre><p>On the other hand, Alice&#39;s principal at this point has no record of
Bob&#39;s public key.  Her server honors Bob&#39;s request because Bob
presents a blessing rooted at her own public key.</p>
<h2 id="blessing-details">Blessing details</h2>
<p>The following command extracts the blessings Bob should use with Alice
and prints them in detail:</p>
<!-- @principalBobDumpBlessings @test -->
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/bob \
    get forpeer alice | \
         $V_BIN/principal dumpblessings -
</code></pre><p>Example output:</p>
<pre><code class="noclipboard nohighlight">Blessings          : bob#alice:friend:bob
PublicKey          : 8e:03:13:7b:f1:57:28:11:87:f0:e8:90:3b:5c:5f:fe
Certificate chains : 2
Chain #0 (1 certificates). Root certificate public key: 8e:03:13:7b:f1:57:28:11:87:f0:e8:90:3b:5c:5f:fe
  Certificate #0: bob with 0 caveats
Chain #1 (2 certificates). Root certificate public key: 0a:e3:61:0e:3e:ec:9c:ce:ed:04:c1:c6:58:78:28:a8
  Certificate #0: alice with 0 caveats
  Certificate #1: friend:bob with 1 caveat
    (0) security.unixTimeExpiryCaveat(1419279349 = 2014-12-22 12:15:49 -0800 PST)</code></pre>

<p>Alice&#39;s public key is at the root of a
<a href="/glossary.html#certificate"><em>certificiate chain</em></a> corresponding to the blessing
<code>alice:friend:bob</code>.</p>
<h3 id="names">Names</h3>
<p>From the <code>dumpblessings</code> output, isolate
<a href="/glossary.html#blessing-name">blessing names</a> (the names presented to a server) with</p>
<!-- @principalBobGetForPeerName @test -->
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/bob \
    get forpeer -names alice
</code></pre><p>This shows that Bob will present <code>bob</code> and <code>alice:friend:bob</code>.</p>
<h3 id="root-keys">Root keys</h3>
<p>Examine <a href="/glossary.html#blessing-root">root keys</a> with
<!-- @principalBobGetForPeerRoots @test --></p>
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/bob \
    get forpeer -rootkey=alice:friend:bob alice
</code></pre><p>That command answers the question</p>
<blockquote>
<p><em>Find the blessings <code>bob</code> will present to <code>alice</code>, and among them find
the blessing named <code>alice:friend:bob</code> and report the public key of
the principal it came from.</em></p>
</blockquote>
<p>In this case, the output should match Alice&#39;s public key:</p>
<!-- @echoAlicesKey @test -->
<pre><code>echo $keyAlice
</code></pre><h3 id="caveats">Caveats</h3>
<p>Examine <a href="/glossary.html#caveat"><em>caveats</em></a> with
<!-- @principalBobGetForPeerCaveats @test --></p>
<pre><code>$V_BIN/principal \
    --v23.credentials $V_TUT/cred/bob \
    get forpeer -caveats=alice:friend:bob alice
</code></pre><p>That command answers the question</p>
<blockquote>
<p><em>Find the blessings <code>bob</code> will present to <code>alice</code>, and among them find
the blessing named <code>alice:friend:bob</code> and report its caveats.</em></p>
</blockquote>
<p>This shows that Bob&#39;s blessing from Alice will expire in about 24h.
That expiration was set using the <code>--for</code> flag in the <code>bless</code> command
<a href="#blessings">above</a>.</p>
<p>Caveats will be discussed in more depth in the <a href="/tutorials/security/first-party-caveats.html">caveats tutorial</a>.</p>

    </main>
    <nav class="previous-next">
      <a href="/tutorials/security/permissions-authorizer.html" class="next">
        <div class="text-wrapper">
          <small>Next</small>
          <div class="text">
            <span>Permissions Authorizer</span>
          </div>
        </div>
        <div class="icon"><i class="material-icons">arrow_forward</i></div>
      </a>
</nav>
  </body>
</html>
