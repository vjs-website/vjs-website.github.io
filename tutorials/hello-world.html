<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,
                                   initial-scale=1,
                                   minimum-scale=1,
                                   maximum-scale=1,
                                   user-scalable=no,
                                   minimal-ui">
  
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
  
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
    <title>Hello World - Vanadium</title>
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,400,400italic,500,500italic,700,700italic|Source+Code+Pro">
  
    <link rel="stylesheet" href="/css/github.css">
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  
    <script src="/js/react-0.14.3.min.js"></script>
    <script src="/js/react-dom-0.14.3.min.js"></script>
  
    <link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="160x160" href="/favicons/favicon-160x160.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/favicon-192x192.png">
    <meta name="msapplication-TileColor" content="#00acc1">
    <meta name="msapplication-TileImage" content="/favicons/mstile-144x144.png">
  
    <link rel="stylesheet" href="/css/bundle.css">
    <script src="/js/bundle.js"></script>
  </head>
  <body>
    <header class="mdl-shadow--2dp">
      <div class="row">
        <div class="icon menu"><i class="material-icons">menu</i></div>
        <div class="icon v-icon"><img src="/images/v-icon-white.svg"></div>
        <div class="logo"><a href="/">Vanadium</a></div>
        <div class="spacer"></div>
        <nav>
          <a href="/">Overview</a>
          <a href="/installation/">Installation</a>
          <a href="/tutorials/hello-world.html">Tutorials</a>
        </nav>
      </div>
    </header>
    <div class="sidebar"></div>
    <div class="sidebar-data">
      <a href="/">Overview</a>
      <a href="/installation/">Installation</a>
    
      <a href="#" class="nav">Tutorials</a>
      <nav>
        <a href="/tutorials/hello-world.html">Hello World</a>
        <a href="/tutorials/basics.html">Client/Server Basics</a>
    
        <a href="#" class="nav">Security</a>
        <nav>
          <a href="/tutorials/security/">Overview</a>
          <a href="/tutorials/security/principals-and-blessings.html">Principals and Blessings</a>
      <a href="/tutorials/security/permissions-authorizer.html">Permissions Authorizer</a>
      <a href="/tutorials/security/first-party-caveats.html">Caveats</a>
      <a href="/tutorials/security/third-party-caveats.html">Third-party Caveats</a>
      <a href="/tutorials/security/agent.html">The Agent</a>
      <a href="/tutorials/security/custom-authorizer.html">Custom Authorizer</a>
    </nav>
    
        <a href="#" class="nav">Naming</a>
        <nav>
          <a href="/tutorials/naming/">Overview</a>
          <a href="/tutorials/naming/mount-table.html">The Mount Table</a>
      <a href="/tutorials/naming/namespace.html">Namespaces</a>
      <a href="/tutorials/naming/suffix-part1.html">The Suffix - Part I</a>
      <a href="/tutorials/naming/suffix-part2.html">The Suffix - Part II</a>
      <a href="/tutorials/naming/globber.html">Globber</a>
    </nav>
    
        <a href="#" class="nav">Java</a>
        <nav>
          <a href="/tutorials/java/">Overview</a>
          <a href="/tutorials/java/fortune.html">Fortune in Java</a>
      <a href="/tutorials/java/android.html">Location Service in Android</a>
    </nav>
    
        <a href="#" class="nav">JavaScript</a>
        <nav>
          <a href="/tutorials/javascript/">Overview</a>
          <a href="/tutorials/javascript/hellopeer.html">Hello Peer</a>
      <a href="/tutorials/javascript/fortune.html">Fortune in JS</a>
      <a href="/tutorials/javascript/security.html">Security in JS</a>
    </nav>
    
        <a href="/tutorials/faq.html">Tutorial FAQ</a>
      </nav>
    
      <a href="#" class="nav">Concepts</a>
      <nav>
        <a href="/concepts/rpc.html">RPC System</a>
    <a href="/concepts/naming.html">Naming</a>
    <a href="/concepts/security.html">Security</a>
    <a href="/concepts/device-management.html">Device Management</a>
    <a href="/concepts/syncbase-overview.html">Syncbase</a>
  </nav>
    
      <a href="/example-apps.html">Example Apps</a>
      <a href="/api-reference.html">API Reference</a>
    
      <a href="#" class="nav">Community</a>
      <nav>
        <a href="/community/coding-guidelines.html">Coding Guidelines</a>
    <a href="/community/contributing.html">Contributing</a>
  </nav>
    
      <a href="#" class="nav">Tools</a>
      <nav>
        <a href="/tools/identity-service-faq.html">Vanadium Identity Service</a>
    <a href="/tools/jiri.html">Jiri</a>
    <a href="/tools/services.html">Vanadium Cloud Services</a>
    <a href="/tools/vanadium-chrome-extension.html">Vanadium Chrome Extension</a>
  </nav>
    
      <a href="#" class="nav">Design Docs</a>
      <nav>
        <a href="/designdocs/authentication.html">Authentication Protocol</a>
    <a href="/designdocs/identity-service.html">Identity Service</a>
    <a href="/designdocs/vdl-spec.html">VDL Specification</a>
    <a href="/designdocs/vom-spec.html">VOM Specification</a>
  </nav>
    
      <a href="/glossary.html">Glossary</a>
      <a href="/faq.html">FAQ</a>
      <a href="/tos.html">Terms of Service</a>
    </div>
    <main>
      <h1 class="title">
        
        Hello World
      </h1>

      <p class="wherein"><strong>Wherein</strong> Vanadium says hello!</p>

      <div class="toc"></div>

      <div class="prerequisites">
      <div class="note info"><p><strong>Prerequisites</strong>:<br>
All tutorials require Vanadium <a href="/installation/">installation</a>, and must run in a <a href="/tutorials/faq.html#why-bash-">bash shell</a>.
<br>Further, please <a href="/sh/scenario-a-setup.sh" download="scenario-a-setup.sh"> download this script</a> then <a href="/tutorials/faq.html#why-source-">source</a> it:</p>
<pre><code>source ~/Downloads/scenario-a-setup.sh
</code></pre><p>This command wipes tutorial files and defines shell environment variables. If you start a new terminal, and just want to re-establish the environment, see instructions <a href="/tutorials/setup.html">here</a>.
</p>
<p></p>
<p>
If you would like to generate files from this tutorial without the copy/paste steps, download and source <a href="/sh/tut-completer-hello-world.sh" download="tut-completer-hello-world.sh">this script</a>. Files will be created in the <code>$V_TUT</code> <a href="/tutorials/setup.html">directory</a>.
</p>
</div>
</div>

      <h1 id="introduction">Introduction</h1>
<p>Practically speaking, Vanadium is a set of Go and JavaScript language
libraries (more languages coming), plus a few dozen services and
command line tools built on top of them.</p>
<p>The goal of this first tutorial is to get you to running code
as quickly as possible.  Subsequent tutorials will explain what&#39;s
happening here in more detail, and take you much further into
<em>security</em> and <em>service discovery</em>.</p>
<p>When they do so, the tutorials create files in <code>$V_TUT</code> (likely
<code>$HOME/v23_tutorial</code>):
<!-- @displayVTut @test --></p>
<pre><code>echo $V_TUT
</code></pre><p>The initial tutorials use Go language examples, but
<a href="/tutorials/faq.html#do-i-need-to-know-go-">you don&#39;t need to know Go</a> to do them.</p>
<p>Since Vanadium is a distributed computing framework, its simplest demo
requires two programs - a <em>server</em> and a <em>client</em>.</p>
<h1 id="make-a-server">Make a server</h1>
<h2 id="the-interface">The interface</h2>
<p>The following command (read more about <code>cat</code> usage <a href="/tutorials/faq.html#where-is-the-source-code-">here</a>) creates a <a href="/glossary.html#vanadium-definition-language-vdl-">Vanadium Definition
Language</a> file defining a <em>Hello</em>
service:</p>
<!-- @defineService @test @completer -->
<pre><code>mkdir -p $V_TUT/src/hello/ifc
 cat - &lt;&lt;EOF &gt;$V_TUT/src/hello/ifc/hello.vdl
package ifc

type Hello interface {
  // Returns a greeting.
  Get() (greeting string | error)
}
EOF
</code></pre><h2 id="stub-code">Stub code</h2>
<p>Use the <code>hello.vdl</code> file to generate Go code describing the hello
interface.  It will soon be linked into a client and server.</p>
<!-- @compileInterface @test @completer -->
<pre><code>VDLROOT=$V23_RELEASE/src/v.io/v23/vdlroot \
    VDLPATH=$V_TUT/src \
    $V_BIN/vdl generate --lang go $V_TUT/src/hello/ifc
</code></pre><p>You can see the newly generated file here:
<!-- @compileInterface @test --></p>
<pre><code>ls $V_TUT/src/hello/ifc
</code></pre><h2 id="implementation">Implementation</h2>
<p>The following implements the Hello interface:</p>
<!-- @serviceImpl @test @completer -->
<pre><code>mkdir -p $V_TUT/src/hello/service
 cat - &lt;&lt;EOF &gt;$V_TUT/src/hello/service/service.go
package service

import (
  &quot;hello/ifc&quot;
  &quot;v.io/v23/context&quot;
  &quot;v.io/v23/rpc&quot;
)

type impl struct {
}

func Make() ifc.HelloServerMethods {
  return &amp;impl {}
}

func (f *impl) Get(_ *context.T, _ rpc.ServerCall) (
    greeting string, err error) {
  return &quot;Hello World!&quot;, nil
}
EOF
</code></pre><h2 id="build-the-server">Build the server</h2>
<p>Service in hand, we need an executable to serve it on the network.</p>
<!-- @server @test @completer -->
<pre><code>mkdir -p $V_TUT/src/hello/server
 cat - &lt;&lt;EOF &gt;$V_TUT/src/hello/server/main.go
package main

import (
  &quot;log&quot;
  &quot;hello/ifc&quot;
  &quot;hello/service&quot;
  &quot;v.io/v23&quot;
  &quot;v.io/x/ref/lib/signals&quot;
  _ &quot;v.io/x/ref/runtime/factories/generic&quot;
)

func main() {
  ctx, shutdown := v23.Init()
  defer shutdown()
  _, _, err := v23.WithNewServer(ctx, &quot;&quot;, ifc.HelloServer(service.Make()), nil)
  if err != nil {
    log.Panic(&quot;Error listening: &quot;, err)
  }
  &lt;-signals.ShutdownOnSignals(ctx)  // Wait forever.
}
EOF
go install hello/server
</code></pre><p>Your server binary is here:
<!-- @checkTheBinary @test --></p>
<pre><code>ls $V_TUT/bin
</code></pre><h1 id="make-a-client">Make a client</h1>
<p>This client is short-lived; it starts, makes a call, then exits.</p>
<!-- @client @test @completer -->
<pre><code>mkdir -p $V_TUT/src/hello/client
 cat - &lt;&lt;EOF &gt;$V_TUT/src/hello/client/main.go
package main

import (
  &quot;flag&quot;
  &quot;fmt&quot;
  &quot;time&quot;
  &quot;hello/ifc&quot;
  &quot;v.io/v23&quot;
  &quot;v.io/v23/context&quot;
  _ &quot;v.io/x/ref/runtime/factories/generic&quot;
)

var (
  server = flag.String(
      &quot;server&quot;, &quot;&quot;, &quot;Name of the server to connect to&quot;)
)

func main() {
  ctx, shutdown := v23.Init()
  defer shutdown()
  f := ifc.HelloClient(*server)
  ctx, cancel := context.WithTimeout(ctx, time.Minute)
  defer cancel()
  hello, _ := f.Get(ctx)
  fmt.Println(hello)
}
EOF
go install hello/client
</code></pre><h1 id="make-a-principal">Make a principal</h1>
<p>All communication in Vanadium is authenticated, meaning both sides
must recognize each other&#39;s identity.  In this initial example we&#39;ll
cheat a bit - we&#39;ll define just one identity (called a <strong>principal</strong>),
then use it for <em>both</em> the client and server.</p>
<p>Create a principal called <code>tutorial</code>:</p>
<!-- @principalTutorial @test -->
<pre><code>$V_BIN/principal create \
    --overwrite $V_TUT/cred/basics tutorial
</code></pre><h1 id="run-your-code">Run your code</h1>
<p>Start the server:</p>
<!-- @runServerAsPrincipal @test @sleep -->
<pre><code>PORT_HELLO=23000  # Pick an unused port.
kill_tut_process TUT_PID_SERVER
$V_TUT/bin/server \
    --v23.credentials $V_TUT/cred/basics \
    --v23.tcp.address :$PORT_HELLO &amp;
TUT_PID_SERVER=$!
</code></pre><p>Run the client to get a hello:</p>
<!-- @runClientAsPrincipal @test -->
<pre><code>$V_TUT/bin/client \
    --v23.credentials $V_TUT/cred/basics \
    --server /localhost:$PORT_HELLO
</code></pre><p>That&#39;s it - you&#39;ve built and run your first Vanadium apps.</p>
<h1 id="clean-up">Clean up</h1>
<!-- @killServer @test -->
<pre><code>kill_tut_process TUT_PID_SERVER
</code></pre><h1 id="summary">Summary</h1>
<ul>
<li><p>You created a server hosting a Hello service on a fixed port defined
using VDL, then used the service from a command line client.</p>
</li>
<li><p>To be approved by Vanadium security, you used the same identity on
both ends of the RPC, making the ends indistinguishable from each
other, automatically authorizing their communication.</p>
</li>
</ul>
<p>All of the above and more will be covered in detail in subsequent
tutorials.</p>

    </main>
    <nav class="previous-next">
      <a href="/tutorials/basics.html" class="next">
        <div class="text-wrapper">
          <small>Next</small>
          <div class="text">
            <span>Client/Server Basics</span>
          </div>
        </div>
        <div class="icon"><i class="material-icons">arrow_forward</i></div>
      </a>
</nav>
  </body>
</html>
