<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,
                                   initial-scale=1,
                                   minimum-scale=1,
                                   maximum-scale=1,
                                   user-scalable=no,
                                   minimal-ui">
  
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
  
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
    <title>Security - Vanadium</title>
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,400,400italic,500,500italic,700,700italic|Source+Code+Pro">
  
    <link rel="stylesheet" href="/css/github.css">
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  
    <script src="/js/react-0.14.3.min.js"></script>
    <script src="/js/react-dom-0.14.3.min.js"></script>
  
    <link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="160x160" href="/favicons/favicon-160x160.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/favicon-192x192.png">
    <meta name="msapplication-TileColor" content="#00acc1">
    <meta name="msapplication-TileImage" content="/favicons/mstile-144x144.png">
  
    <link rel="stylesheet" href="/css/bundle.css">
    <script src="/js/bundle.js"></script>
  </head>
  <body>
    <header class="mdl-shadow--2dp">
      <div class="row">
        <div class="icon menu"><i class="material-icons">menu</i></div>
        <div class="icon v-icon"><img src="/images/v-icon-white.svg"></div>
        <div class="logo"><a href="/">Vanadium</a></div>
        <div class="spacer"></div>
        <nav>
          <a href="/">Overview</a>
          <a href="/installation/">Installation</a>
          <a href="/tutorials/hello-world.html">Tutorials</a>
        </nav>
      </div>
    </header>
    <div class="sidebar"></div>
    <div class="sidebar-data">
      <a href="/">Overview</a>
      <a href="/installation/">Installation</a>
    
      <a href="#" class="nav">Tutorials</a>
      <nav>
        <a href="/tutorials/hello-world.html">Hello World</a>
        <a href="/tutorials/basics.html">Client/Server Basics</a>
    
        <a href="#" class="nav">Security</a>
        <nav>
          <a href="/tutorials/security/">Overview</a>
          <a href="/tutorials/security/principals-and-blessings.html">Principals and Blessings</a>
      <a href="/tutorials/security/permissions-authorizer.html">Permissions Authorizer</a>
      <a href="/tutorials/security/first-party-caveats.html">Caveats</a>
      <a href="/tutorials/security/third-party-caveats.html">Third-party Caveats</a>
      <a href="/tutorials/security/agent.html">The Agent</a>
      <a href="/tutorials/security/custom-authorizer.html">Custom Authorizer</a>
    </nav>
    
        <a href="#" class="nav">Naming</a>
        <nav>
          <a href="/tutorials/naming/">Overview</a>
          <a href="/tutorials/naming/mount-table.html">The Mount Table</a>
      <a href="/tutorials/naming/namespace.html">Namespaces</a>
      <a href="/tutorials/naming/suffix-part1.html">The Suffix - Part I</a>
      <a href="/tutorials/naming/suffix-part2.html">The Suffix - Part II</a>
      <a href="/tutorials/naming/globber.html">Globber</a>
    </nav>
    
        <a href="#" class="nav">Java</a>
        <nav>
          <a href="/tutorials/java/">Overview</a>
          <a href="/tutorials/java/fortune.html">Fortune in Java</a>
      <a href="/tutorials/java/android.html">Location Service in Android</a>
    </nav>
    
        <a href="#" class="nav">JavaScript</a>
        <nav>
          <a href="/tutorials/javascript/">Overview</a>
          <a href="/tutorials/javascript/hellopeer.html">Hello Peer</a>
      <a href="/tutorials/javascript/fortune.html">Fortune in JS</a>
      <a href="/tutorials/javascript/security.html">Security in JS</a>
    </nav>
    
        <a href="/tutorials/faq.html">Tutorial FAQ</a>
      </nav>
    
      <a href="#" class="nav">Concepts</a>
      <nav>
        <a href="/concepts/rpc.html">RPC System</a>
    <a href="/concepts/naming.html">Naming</a>
    <a href="/concepts/security.html">Security</a>
    <a href="/concepts/device-management.html">Device Management</a>
    <a href="/concepts/syncbase-overview.html">Syncbase</a>
  </nav>
    
      <a href="/example-apps.html">Example Apps</a>
      <a href="/api-reference.html">API Reference</a>
    
      <a href="#" class="nav">Community</a>
      <nav>
        <a href="/community/coding-guidelines.html">Coding Guidelines</a>
    <a href="/community/contributing.html">Contributing</a>
  </nav>
    
      <a href="#" class="nav">Tools</a>
      <nav>
        <a href="/tools/identity-service-faq.html">Vanadium Identity Service</a>
    <a href="/tools/jiri.html">Jiri</a>
    <a href="/tools/services.html">Vanadium Cloud Services</a>
    <a href="/tools/vanadium-chrome-extension.html">Vanadium Chrome Extension</a>
  </nav>
    
      <a href="#" class="nav">Design Docs</a>
      <nav>
        <a href="/designdocs/authentication.html">Authentication Protocol</a>
    <a href="/designdocs/identity-service.html">Identity Service</a>
    <a href="/designdocs/vdl-spec.html">VDL Specification</a>
    <a href="/designdocs/vom-spec.html">VOM Specification</a>
  </nav>
    
      <a href="/glossary.html">Glossary</a>
      <a href="/faq.html">FAQ</a>
      <a href="/tos.html">Terms of Service</a>
    </div>
    <main>
      <h1 class="title">
        
        Security
      </h1>

      <div class="toc"></div>

      <p>The Vanadium security model defines mechanisms for identification,
authentication, and authorization.  The model supports fully decentralized,
fine-grained, and auditable delegation of authority.</p>
<p>For example, Alice could choose to delegate access to Bob only
under the following conditions:</p>
<ul>
<li>the operation is <code>Read</code>, and</li>
<li>the current time is between <code>6PM and 8PM</code>, and</li>
<li>Bob is in Alice&#39;s <code>&quot;friends&quot;</code> group, and</li>
<li>Bob is in close physical proximity of Alice</li>
</ul>
<p>Such delegations do not have to go through the cloud or any centralized
service, can be accomplished by a single interaction between Alice and Bob,
and encode an audit trail of the principals involved in the delegation.</p>
<p>All network communication is always mutually authenticated and
encrypted.  The model is heavily influenced by the work on <a href="http://people.csail.mit.edu/rivest/sdsi11.html#secoverview">Simple
Distributed Security Infrastructure</a> by Ronald Rivest and Butler Lampson.</p>
<h1 id="principals-blessings">Principals &amp; blessings</h1>
<p>The security model is centered around the concepts of <em>principals</em> and
<em>blessings</em>. A <em>principal</em> in the Vanadium framework is a public and
private <a href="http://en.wikipedia.org/wiki/Public-key_cryptography">key pair</a>.  All Vanadium processes act on behalf of a principal.
The notation (<code>P<sub>Alice</sub>, S<sub>Alice</sub></code>) is used
to refer to the public and private key respectively of a principal Alice.</p>
<p>Principals have a set of human-readable names bound to them, via <em>blessings</em>.
For instance, a television principal, represented by the key pair
(<code>P<sub>tv</sub>, S<sub>tv</sub></code>), may have a blessing from the
manufacturer with the human-readable name of <code>popularcorp:products:tv</code>.
Principals can have multiple blessings bound to them and thus have multiple
names, each reflecting the principal that granted the blessing. For example,
the particular PopularCorp tv owned by Alice might also have the name
<code>alice:devices:hometv</code>.</p>
<p>Principals are authenticated and authorized based on the blessing names bound to them.
For example, a service may grant access to <code>alice:devices:hometv</code>, which means that all
principals with a blessing name matching <code>alice:devices:hometv</code> will have access.
Service administrators always use blessing names, not public keys, when making
authorization decisions or inspecting audit trails.</p>
<p>Concretely, blessings are represented by <a href="http://en.wikipedia.org/wiki/Public_key_certificate">public-key certificate</a> chains bound to the
principal&#39;s public key.  For example, the name
<code>popularcorp:products:tv</code> could be bound to the public key
<code>P<sub>tv</sub></code> using a chain of three certificates:</p>
<ol>
<li>Certificate with public key <code>P<sub>popularcorp</sub></code> and name
<code>popularcorp</code>, <em>chained to</em></li>
<li>Certificate with public key <code>P<sub>products</sub></code> and name <code>products</code>, <em>chained to</em></li>
<li>Certificate with public key <code>P<sub>tv</sub></code> and name <code>tv</code></li>
</ol>
<p>Chaining means that the certificate is signed by the private counterpart of the
public key in the previous certificate. The first certificate in the chain
is self-signed, i.e. signed by private counterpart of the public key mentioned
in the certificate (<code>P<sub>popularcorp</sub></code> in this case).</p>
<p>The first certificate is also called the <em>root certificate</em> and the first
certificate&#39;s public key is called the <em>blessing root</em>.</p>
<p>The term <em>blessing</em> is used to refer to a certificate chain and the term
<em>blessing name</em> is used to refer to the human-readable name specified in the
certificate chain.  If it is clear from the context, then <em>blessing</em> may be
used in lieu of <em>blessing name</em> for brevity.</p>
<p>The private key of the principal will generally be hosted by a <a href="http://en.wikipedia.org/wiki/Trusted_Platform_Module">TPM</a> (Trusted
Platform Module) or an agent process and will not be held in memory of the
application process to protect against leakage. Private keys are never sent on
the network and are used only for digital signing operations.</p>
<h1 id="mutual-authentication">Mutual authentication</h1>
<p>Clients and servers in a Vanadium remote procedure call (RPC) always act on
behalf of a principal, and mutually authenticate each other via blessings bound
to the other end&#39;s principal.  The <a href="/designdocs/authentication.html">Vanadium authentication protocol</a> allows
clients and servers to exchange blessings bound to them, and verify that the
other end possesses the private counterpart of the public key to which their
blessings are bound.  At the end of the protocol, an encrypted channel is
established between the client and server for performing the RPC.
<a href="http://en.wikipedia.org/wiki/Forward_secrecy">Forward-secrecy</a> safe protocols (like <a href="http://en.wikipedia.org/wiki/Transport_Layer_Security">TLS</a> with <a href="http://en.wikipedia.org/wiki/Elliptic_curve_Diffie%E2%80%93Hellman">ECDHE</a> key exchanges or a
<a href="http://nacl.cr.yp.to/box.html">NaCl box</a> with ephemerel keys) are used for setting up the encrypted channel.</p>
<h1 id="delegation">Delegation</h1>
<p>The authorizations associated with a principal are determined solely by the
blessings bound to the principal.  Delegation of authority across principals is
achieved via the <em>Bless</em> operation.  Bless allows a principal to extend one
of its blessings and create a blessing bound to another principal&#39;s public key,
thereby delegating any authorizations associated with the blessing.</p>
<p>For example, a principal (<code>P<sub>alice</sub>, S<sub>alice</sub></code>) may bless another principal
(<code>P<sub>tv</sub>, S<sub>tv</sub></code>) by extending one of
her blessings, say <code>alice</code>, with a certificate with the name <code>devices:hometv</code> and the tv&#39;s public key
<code>P<sub>tv</sub></code>. This certificate is signed with the secret key of the blesser
(<code>S<sub>alice</sub></code>). The blessing can therefore be viewed as making
the statement</p>
<blockquote>
<p><code>P<sub>alice</sub></code> using name <code>alice</code> says that
<code>P<sub>tv</sub></code> can use the name
<code>alice:devices:hometv</code></p>
</blockquote>
<p>Blessing names are thus hierarchical, with colons used to distinguish the
blesser (<code>alice</code>) from the blessee (<code>devices:hometv</code>).</p>
<h1 id="caveats">Caveats</h1>
<p>In practice, delegation of authority is never unconditional and this is
supported by the security model. Blessings can carry caveats that restrict the
conditions under which the blessing can be used.  For example, a principal
(<code>P<sub>alice</sub>, S<sub>alice</sub></code>) can bless
another principal (<code>P<sub>bob</sub>, S<sub>bob</sub></code>)
as <code>alice:houseguest:bob</code> but with the caveat that the blessing can only be used
to talk to her TV (and not to remote services that Alice uses).
This caveat is specified in the certificate written by <code>alice</code> (for Bob&#39;s public key
<code>P<sub>bob</sub></code>).  Thus the blessing makes a signed statement of
the form:</p>
<blockquote>
<p><code>P<sub>alice</sub></code> using name <code>alice</code> says that
<code>P<sub>bob</sub></code> can use the name
<code>alice:houseguest:bob</code> <em>as long as</em><br></p>
<ul>
<li><code>server</code> matches <code>alice:devices:hometv</code></li>
</ul>
</blockquote>
<p>When Bob presents this blessing to a server, the server will recognize the
principal as <code>alice:houseguest:bob</code> only if the server&#39;s own blessing name
matches <code>alice:devices:hometv</code>.</p>
<p>Caveats can be placed on any information available at the time of the request.
This includes, among other things, the time the request is being made, whether
the blessing wielder is a client or a server, the communication protocol being
used and the method being invoked.</p>
<h2 id="third-party-caveats">Third-party caveats</h2>
<p>Validation of some caveats may involve expensive computation or I/O or
information not accessible to the authorizing service. In such cases, the
blesser can push the burden of validation to a <em>third party</em> (i.e., neither the
 party that wields the blessings nor the party that is authorizing them). For
example, Alice can allow Bob to use the blessing <code>alice:houseguest:bob</code> only if
bob is within 100 feet of Alice&#39;s home. When bob wants to authenticate as
<code>alice:houseguest:bob</code>, he must obtain a <em>discharge</em> (proof) from the third-party
service <code>home_proximity_discharger</code> (mentioned in the caveat) before he can
use the name <code>alice:houseguest:bob</code>. Thus the blessing makes the signed
statement:</p>
<blockquote>
<p><code>P<sub>alice</sub></code> using name <code>alice</code> says that
<code>P<sub>bob</sub></code> can use the name
<code>alice:houseguest:bob</code> <em>as long as</em><br></p>
<ul>
<li><code>home_proximity_discharger</code> issues a discharge after validating that
<code>P<sub>bob</sub></code> is <code>&quot;within 100 ft&quot;</code> of it.</li>
</ul>
</blockquote>
<p>By using such <em>third-party caveats</em>, the burden of making the network calls to
obtain a discharge and the burden of any computation or I/O to validate the
restrictions are moved to the wielder of the blessing and to the third-party respectively, away from the end at which the authorization decision is being made.</p>
<h1 id="validating-blessings">Validating blessings</h1>
<p>A blessing is considered valid in the context of an RPC if and only if</p>
<ul>
<li>the blessing is cryptographically valid, i.e., each certificate in the
blessing&#39;s certificate chain has a valid signature.</li>
<li>all caveats associated with the blessing are valid in the context of the RPC</li>
<li>the blessing is recognized.</li>
</ul>
<p>A blessing is <em>recognized</em> by a Vanadium application if and only if the
application considers the blessing root as authoritative for the blessing name.
(Recall that blessing root is the public key of the first certificate in the
blessing&#39;s certificate chain.)</p>
<p>For example, an application may consider the root
<code>P<sub>popularcorp</sub></code> as authoritative on all blessing names
that begin with <code>popularcorp</code>. Such an application would then recognize the
blessing <code>popularcorp:products:tv</code> if it is rooted in
<code>P<sub>popularcorp</sub></code>.</p>
<p>All Vanadium applications are configured to consider certain blessing roots as
authoritative for certain names, and this configuration may vary across
applications.</p>
<h1 id="authorization">Authorization</h1>
<p>In a remote procedure call, two authorization decisions need to be made:</p>
<ul>
<li>Does the client trust the server enough to <strong>make</strong> a call? Making a call
reveals the identity of the client (i.e., its blessings), the object being
manipulated, the method being invoked and the arguments.</li>
<li>Does the server allow the client to invoke a <em>method</em> on an <em>object</em> with
the provided <em>arguments</em>?</li>
</ul>
<p>Both these decision are made using the following principle:</p>
<center><h4>Authorization is based on validated blessing names</h4></center>

<p>For example, a client may wish to invoke the <code>Display</code> method on a service only
if the server presents a blessing matching the pattern <code>alice:devices:hometv</code>.
Similarly, the service may allow a client to invoke the <code>Display</code> method only
if the client presents a blessing matching the pattern <code>alice:houseguest</code>.</p>
<p>The public keys of the client and server principals do not matter as long as
they present a blessing with a valid name matching the other end&#39;s
authorization policy.  Each end ascertains the valid blessing name of the other
end by validating all caveats associated with the blessing and verifying that the
blessing is recognized.</p>
<p>A pattern is a blessing name that may optionally end in a <code>:$</code>. If the pattern
ends in a `:$``, it is only matched by the exact blessing name. Otherwise, it
is matched by the blessing name and all its extensions.</p>
<p>For example, the pattern <code>alice:houseguest</code> will be matched by the name <code>alice:houseguest</code>
and its extensions (e.g., <code>alice:houseguest:bob</code>) but
not by the name <code>bob</code> or <code>alice:colleague</code> or prefixes of the pattern (i.e.
<code>alice</code>).  On the other hand, the pattern <code>alice:houseguest:$</code> would be matched
exactly by the name <code>alice:houseguest</code>.</p>
<h2 id="selecting-a-blessing">Selecting a blessing</h2>
<p>A principal may have collected multiple blessings and may need to choose which
subset of them to present when authenticating with a peer. It could present
all, at the cost of leaking sensitive information (e.g., <code>bob</code> is a houseguest
of <code>alice</code>) when not necessary. Instead Vanadium provides a means to
selectively share blessings with appropriate peers.</p>
<p>All blessings for a principal are stored in a <em>blessing store</em>, akin to a
cookie jar in web browsers. The store marks the blessings to be presented when
acting as a server (and a server always reveals its blessings first as per the
<a href="/designdocs/authentication.html">Vanadium authentication protocol</a>). Clients select a subset of their blessings
from the store to share with a server based on the blessing names of the
server.</p>
<p>For example, Bob&#39;s blessing store can add the blessing <code>alice:houseguest:bob</code>
to the store only to be shared with servers matching the pattern <code>alice</code>.
Thus, all servers run by alice (such as <code>alice:hometv</code> and <code>alice:homedoor</code>)
will see the <code>alice:houseguest:bob</code> blessing when Bob makes requests to them,
but any other servers that Bob communicates with will not know that he has this
blessing from Alice.</p>
<h1 id="faqs">FAQs</h1>
<ul>
<li><p><strong>What is the plan for storing keys and blessings?</strong></p>
<p>All &quot;credentials&quot; of a principal (its private key, blessings, recognized blessing
roots) are stored in a <code>V23_CREDENTIALS</code> directory on the file
system. In the short term, the private key is kept encrypted at rest and
decoded in memory by an &#39;agent&#39; process. The &#39;agent&#39; process is the only one
with access to the private key and can audit usage of the key, similar to how
&#39;ssh-agent&#39; works. Longer term, we envision wider use of <a href="http://en.wikipedia.org/wiki/Trusted_Platform_Module">TPM</a>s and the key
being kept securely in them.</p>
</li>
<li><p><strong>Why is authorization based on blessing patterns as opposed to fixed
blessing names?</strong></p>
<p>The main motivations for using patterns (as opposed to fixed strings) for
authorization are to encourage delegation, enable auditing, and discourage
insecure workarounds.  For example, if Alice&#39;s tv authorizes based on the
pattern <code>alice:houseguest</code>, then an authorized principal Bob with the
blessing <code>alice:houseguest:bob</code> can delegate Carol to use the tv by blessing
her with the name <code>alice:houseguest:bob:friend</code> (with appropriate caveats).
This name would match the blessing pattern <code>alice:houseguest</code>.  By making
safely constrained delegation easy, Vanadium aims to discourage insecure
workarounds. If delegates were not authorized and Bob really wanted to share
access to Alice&#39;s tv with Carol, he may be tempted to work around the
restriction by running a proxy service for Carol. Alternatively, he could
create a new private key, get that blessed as <code>alice:houseguest:bob</code> and
share the key with Carol.  By making blessings and patterns easy to use
instead, Bob is discouraged from trying out these hacks.</p>
<p>Having said that, patterns can also terminate with a <code>$</code> which forbid
delegation.  So the pattern <code>alice:$</code> will only be matched by the blessing
name <code>alice</code> and not by <code>alice:houseguest</code> etc. While this facility does
exist, application developers and administrators are encouraged to think hard
about why they want to disallow delegation and whether doing so will
encourage hacky, insecure workarounds.</p>
</li>
<li><p><strong>Why does the pattern <code>alice:houseguest</code> not match prefixes like <code>alice</code>?</strong></p>
<p>The pattern <code>alice:houseguest</code> matches the blessing name <code>alice:houseguest</code>
and any delegates like <code>alice:houseguest:bob</code> or <code>alice:houseguest:carol</code>,
but not <code>alice</code> itself. Doing so does not really prevent <code>alice</code> from
accessing the resource, as <code>alice</code> can generate the blessing name
<code>alice:houseguest:foo</code> for herself at any time. However, this does protect
against accidental use of authority.</p>
<p>Think of how <code>sudo</code> works in UNIX-based systems. Users with <code>sudo</code> access can
act as the superuser, but they must explicitly do so by invoking the <code>sudo</code>
command. Similar to that, <code>alice</code> can generate the blessings required to
access resources protected by the pattern <code>alice:houseguest</code>, but she must
explicitly choose to do so by blessing herself.</p>
</li>
<li><p><strong>The authorization story described above demonstrates that there are two
ways to authorize a client to invoke methods at a server: (1) add the
blessing names of the client to the access list, or (2) bless the client,
providing it with a blessing name (with caveats) that matches an existing
entry in the access list.  Which method is appropriate?</strong></p>
<p>  The appropriate method of authorization would depend on who wants to
  authorize whom and why. For example, consider these simple questions:</p>
<ul>
<li><p><em>Do you have the ability to change the access list?</em></p>
<p>It is likely that only <code>alice</code> can change the access list on the tv
(since she owns it). Thus, if <code>alice:houseguest:bob</code> wants to provide
<code>carol</code> with access to the tv, his options are to either bless <code>carol</code> or
find <code>alice</code> and trouble her to change the access list or try workarounds
like proxying the RPC.</p>
<p>On the other hand, if <code>alice</code> knows that <code>dave</code> should be able to access
the tv then she can add <code>dave</code> to the access list and avoid the need to
communicate with <code>dave</code> (to bless him) first.</p>
</li>
<li><p><em>Are there conditions on the access?</em></p>
<p>Blessings allow for caveats on their use. For example,
<code>alice:houseguest:bob</code> can only be used within 100ft of the house. For
simplicity, Vanadium currently intends to support such caveats only on
blessings and keep access lists as simple lists of patterns (instead of
being able to specify arbitrary caveats in the access list).</p>
</li>
</ul>
</li>
<li><p><strong>What are the privacy implications of exchanging blessings using the
<a href="/designdocs/authentication.html">Vanadium authentication protocol</a>? </strong></p>
<p>Blessings can often contain <a href="http://en.wikipedia.org/wiki/Personally_identifiable_information">personally identifiable information</a> such as
usernames and email addresses, and therefore revealing them to unauthorized
parties poses a privacy risk. (Note that revealing blessings to unauthorized parties
does not pose a security or authorization risk as the blessings can
only be used by the principal they are bound to.)</p>
<p>The <a href="/designdocs/authentication.html">Vanadium authentication protocol</a> ensures that blessings are always exchanged
over an encrypted channel and thus are protected from passive eavesdroppers.
Protecting blessings from active attackers -- ones that can pose as a
legitimate peer to the client or the server -- is more challenging. The protocol protects
the client&#39;s blessings from being revealed to unauthorized recipients at the cost of
revealing the server&#39;s blessings to all clients.</p>
<p>Servers always reveal their blessings first. This means that any client can learn the
server&#39;s blessings by making a request to the server. The server can choose what
blessings it authenticates with, and it is advisable that the server only choose blessings
that it is comfortable revealing to all clients.</p>
<p>Clients reveal their blessings only after seeing the server&#39;s blessings.
Clients can control the blessings revealed to individual servers by tagging blessings with
<em>server patterns</em> in their <a href="#selecting-a-blessing">blessing stores</a>.
A server pattern is a blessing pattern indicating that the specific blessing it accompanies can
only be revealed to servers that have a blessing name matching the pattern.</p>
<p>For example, if a client has a blessing <code>alice:houseguest</code> tagged with the pattern
<code>alice:devices</code> in its blessing store then the blessing will only be revealed to servers that have
blessings matching the pattern <code>alice:devices</code> (e.g.,<code>alice:devices:tv</code>).
Other services (e.g., <code>carol:homedoor</code>) that the client communicates with will never see
this blessing and thus never learn that the client is Alice&#39;s <em>houseguest</em>.</p>
</li>
</ul>

    </main>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59720824-6', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
