<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,
                                   initial-scale=1,
                                   minimum-scale=1,
                                   maximum-scale=1,
                                   user-scalable=no,
                                   minimal-ui">
  
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
  
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
    <title>RPC System - Vanadium</title>
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,400,400italic,500,500italic,700,700italic|Source+Code+Pro">
  
    <link rel="stylesheet" href="/css/github.css">
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  
    <script src="/js/react-0.14.3.min.js"></script>
    <script src="/js/react-dom-0.14.3.min.js"></script>
  
    <link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="160x160" href="/favicons/favicon-160x160.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/favicon-192x192.png">
    <meta name="msapplication-TileColor" content="#00acc1">
    <meta name="msapplication-TileImage" content="/favicons/mstile-144x144.png">
  
    <link rel="stylesheet" href="/css/bundle.css">
    <script src="/js/bundle.js"></script>
  </head>
  <body>
    <header class="mdl-shadow--2dp">
      <div class="row">
        <div class="icon menu"><i class="material-icons">menu</i></div>
        <div class="icon v-icon"><img src="/images/v-icon-white.svg"></div>
        <div class="logo"><a href="/">Vanadium</a></div>
        <div class="spacer"></div>
        <nav>
          <a href="/">Overview</a>
          <a href="/installation/">Installation</a>
          <a href="/tutorials/hello-world.html">Tutorials</a>
        </nav>
      </div>
    </header>
    <div class="sidebar"></div>
    <div class="sidebar-data">
      <a href="/">Overview</a>
      <a href="/installation/">Installation</a>
    
      <a href="#" class="nav">Tutorials</a>
      <nav>
        <a href="/tutorials/hello-world.html">Hello World</a>
        <a href="/tutorials/basics.html">Client/Server Basics</a>
    
        <a href="#" class="nav">Security</a>
        <nav>
          <a href="/tutorials/security/">Overview</a>
          <a href="/tutorials/security/principals-and-blessings.html">Principals and Blessings</a>
      <a href="/tutorials/security/permissions-authorizer.html">Permissions Authorizer</a>
      <a href="/tutorials/security/first-party-caveats.html">Caveats</a>
      <a href="/tutorials/security/third-party-caveats.html">Third-party Caveats</a>
      <a href="/tutorials/security/agent.html">The Agent</a>
      <a href="/tutorials/security/custom-authorizer.html">Custom Authorizer</a>
    </nav>
    
        <a href="#" class="nav">Naming</a>
        <nav>
          <a href="/tutorials/naming/">Overview</a>
          <a href="/tutorials/naming/mount-table.html">The Mount Table</a>
      <a href="/tutorials/naming/namespace.html">Namespaces</a>
      <a href="/tutorials/naming/suffix-part1.html">The Suffix - Part I</a>
      <a href="/tutorials/naming/suffix-part2.html">The Suffix - Part II</a>
      <a href="/tutorials/naming/globber.html">Globber</a>
    </nav>
    
        <a href="#" class="nav">Java</a>
        <nav>
          <a href="/tutorials/java/">Overview</a>
          <a href="/tutorials/java/fortune.html">Fortune in Java</a>
      <a href="/tutorials/java/android.html">Location Service in Android</a>
    </nav>
    
        <a href="#" class="nav">JavaScript</a>
        <nav>
          <a href="/tutorials/javascript/">Overview</a>
          <a href="/tutorials/javascript/hellopeer.html">Hello Peer</a>
      <a href="/tutorials/javascript/fortune.html">Fortune in JS</a>
      <a href="/tutorials/javascript/security.html">Security in JS</a>
    </nav>
    
        <a href="/tutorials/faq.html">Tutorial FAQ</a>
      </nav>
    
      <a href="#" class="nav">Concepts</a>
      <nav>
        <a href="/concepts/rpc.html">RPC System</a>
    <a href="/concepts/naming.html">Naming</a>
    <a href="/concepts/security.html">Security</a>
    <a href="/concepts/device-management.html">Device Management</a>
    <a href="/concepts/syncbase-overview.html">Syncbase</a>
  </nav>
    
      <a href="/example-apps.html">Example Apps</a>
      <a href="/api-reference.html">API Reference</a>
    
      <a href="#" class="nav">Community</a>
      <nav>
        <a href="/community/coding-guidelines.html">Coding Guidelines</a>
    <a href="/community/contributing.html">Contributing</a>
  </nav>
    
      <a href="#" class="nav">Tools</a>
      <nav>
        <a href="/tools/identity-service-faq.html">Vanadium Identity Service</a>
    <a href="/tools/jiri.html">Jiri</a>
    <a href="/tools/services.html">Vanadium Cloud Services</a>
    <a href="/tools/vanadium-chrome-extension.html">Vanadium Chrome Extension</a>
  </nav>
    
      <a href="#" class="nav">Design Docs</a>
      <nav>
        <a href="/designdocs/authentication.html">Authentication Protocol</a>
    <a href="/designdocs/identity-service.html">Identity Service</a>
    <a href="/designdocs/vdl-spec.html">VDL Specification</a>
    <a href="/designdocs/vom-spec.html">VOM Specification</a>
  </nav>
    
      <a href="/glossary.html">Glossary</a>
      <a href="/faq.html">FAQ</a>
      <a href="/tos.html">Terms of Service</a>
    </div>
    <main>
      <h1 class="title">
        
        RPC System
      </h1>

      <div class="toc"></div>

      <p>The Vanadium remote procedure call (<a href="http://en.wikipedia.org/wiki/Remote_procedure_call">RPC</a>) system enables <a href="http://en.wikipedia.org/wiki/Inter-process_communication">communication</a>
between processes by presenting an API based on local function calls.  Function
calls are a familiar model to developers, and the API hides low-level details
like the underlying network transport and data serialization protocols.</p>
<h1 id="basics">Basics</h1>
<p>There are two participants in RPC-based communication.  The caller of an RPC is
known as the <strong>client</strong> and the receiver that implements the RPC is known as the
<strong>server</strong>.  A single device may often behave as a client for some operations,
and as a server for other operations.</p>
<p>An example of a simple RPC:</p>
<pre><code>  Divide(x, y int32) (quotient, remainder int32 | error)
</code></pre><p>The client calls <code>Divide</code> like a regular function, providing two integer input
arguments <code>x</code> and <code>y</code>.  The server implements <code>Divide</code> and returns either the
result of <code>x/y</code> as two integer output arguments <code>quotient</code> and <code>remainder</code>, or
an error.  Notice that errors may always occur, e.g. the client may be unable to
contact the server if the server isn&#39;t running.  Every RPC includes the
possibility of returning an error rather than the specified output arguments.</p>
<p>An example of a streaming RPC:</p>
<pre><code>  Print(format string) stream&lt;int32, string&gt; (string | error)
</code></pre><p>The client calls <code>Print</code> and provides a single string argument <code>format</code>.
Thereafter the client may stream zero or more integer arguments to the server,
and the server will reply with the string representation of that argument.  When
the operation is finished, the server responds with a string containing any
final output.  The input and output arguments behave identically to the
non-streaming example.</p>
<p>The streaming arguments are transferred after the input arguments are sent from
client to server, and before the output arguments are sent from server to
client.  The exact protocol for the streaming arguments is determined by the
application; supported modes include client to server streaming for uploads,
server to client streaming for downloads, as well as bi-directional streaming
for other use cases.</p>
<p>The RPC system takes care of the underlying protocols necessary for all of these
forms of communication.</p>
<h1 id="vdl">VDL</h1>
<p>The Vanadium Definition Language (VDL) enables interoperability between
software components executing in different computing environments. For
example, a frontend written in JavaScript running on a mobile phone may wish
to communicate with a backend written in Go running in the cloud.</p>
<p>VDL has a well-defined type system and semantics that specify the baseline
behavior for all RPCs.  Each native computing environment or programming
language has a mapping between native concepts and VDL.  Specifying application
level RPC protocols in terms of VDL enables clients and servers to be easily
written for any supported environment.</p>
<p>VDL can define four different entities:</p>
<p><strong>Interfaces</strong> contain methods that can be invoked via RPCs.</p>
<pre><code>// Restaurant contains methods to order items of food,
// and to check their price without ordering.
type Restaurant interface {
  // Order orders the item of food, and returns its price.
  Order(item Food) (Price | error)
  // Price returns the price for the item of food.
  Price(item Food) (Price | error)
}
</code></pre><p><strong>Types</strong> define data sent via RPC.</p>
<pre><code>// Food enumerates the available food items.
type Food enum {
  Pizza
  Pasta
  Calzone
}
// Price represents the price of a food item.
type Price uint16
</code></pre><p><strong>Constants</strong> to hold fixed data used by the application protocol.</p>
<pre><code>// StandardPrices holds standard fixed prices for each
// food item.
const StandardPrices map[Food]Price{
  Pizza: 10, Pasta: 8, Calzone: 9,
}
</code></pre><p><strong>Errors</strong> that may be returned from failing RPCs, with support for
internationalization of the error messages.</p>
<pre><code>// MissingIngredients is returned when a food item is
// unavailable, because an ingredient is out of stock.
error MissingIngredients(ingredientName string) {
  &quot;en&quot; : &quot;{ingredientName} is out of stock&quot;
}
</code></pre><p>For more details see the <a href="/designdocs/vdl-spec.html">VDL specification</a>.</p>
<h1 id="vom">VOM</h1>
<p>The Vanadium Object Marshalling (VOM) format is the underlying serialization
format used by the RPC system.  VOM supports serialization of all types
representable in VDL. It is a self-describing protocol that retains full type
information when transmitting values and, in particular, retains type
information for all method arguments.</p>
<p>For more details see the <a href="/designdocs/vom-spec.html">VOM specification</a>.</p>

    </main>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59720824-6', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
