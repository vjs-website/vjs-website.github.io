<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,
                                   initial-scale=1,
                                   minimum-scale=1,
                                   maximum-scale=1,
                                   user-scalable=no,
                                   minimal-ui">
  
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
  
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
    <title>Vanadium Chrome Extension - Vanadium</title>
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,400,400italic,500,500italic,700,700italic|Source+Code+Pro">
  
    <link rel="stylesheet" href="/css/github.css">
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  
    <script src="/js/react-0.14.3.min.js"></script>
    <script src="/js/react-dom-0.14.3.min.js"></script>
  
    <link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="160x160" href="/favicons/favicon-160x160.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/favicon-192x192.png">
    <meta name="msapplication-TileColor" content="#00acc1">
    <meta name="msapplication-TileImage" content="/favicons/mstile-144x144.png">
  
    <link rel="stylesheet" href="/css/bundle.css">
    <script src="/js/bundle.js"></script>
  </head>
  <body>
    <header class="mdl-shadow--2dp">
      <div class="row">
        <div class="icon menu"><i class="material-icons">menu</i></div>
        <div class="icon v-icon"><img src="/images/v-icon-white.svg"></div>
        <div class="logo"><a href="/">Vanadium</a></div>
        <div class="spacer"></div>
        <nav>
          <a href="/">Overview</a>
          <a href="/installation/">Installation</a>
          <a href="/tutorials/hello-world.html">Tutorials</a>
        </nav>
      </div>
    </header>
    <div class="sidebar"></div>
    <div class="sidebar-data">
      <a href="/">Overview</a>
      <a href="/installation/">Installation</a>
    
      <a href="#" class="nav">Tutorials</a>
      <nav>
        <a href="/tutorials/hello-world.html">Hello World</a>
        <a href="/tutorials/basics.html">Client/Server Basics</a>
    
        <a href="#" class="nav">Security</a>
        <nav>
          <a href="/tutorials/security/">Overview</a>
          <a href="/tutorials/security/principals-and-blessings.html">Principals and Blessings</a>
      <a href="/tutorials/security/permissions-authorizer.html">Permissions Authorizer</a>
      <a href="/tutorials/security/first-party-caveats.html">Caveats</a>
      <a href="/tutorials/security/third-party-caveats.html">Third-party Caveats</a>
      <a href="/tutorials/security/agent.html">The Agent</a>
      <a href="/tutorials/security/custom-authorizer.html">Custom Authorizer</a>
    </nav>
    
        <a href="#" class="nav">Naming</a>
        <nav>
          <a href="/tutorials/naming/">Overview</a>
          <a href="/tutorials/naming/mount-table.html">The Mount Table</a>
      <a href="/tutorials/naming/namespace.html">Namespaces</a>
      <a href="/tutorials/naming/suffix-part1.html">The Suffix - Part I</a>
      <a href="/tutorials/naming/suffix-part2.html">The Suffix - Part II</a>
      <a href="/tutorials/naming/globber.html">Globber</a>
    </nav>
    
        <a href="#" class="nav">Java</a>
        <nav>
          <a href="/tutorials/java/">Overview</a>
          <a href="/tutorials/java/fortune.html">Fortune in Java</a>
      <a href="/tutorials/java/android.html">Location Service in Android</a>
    </nav>
    
        <a href="#" class="nav">JavaScript</a>
        <nav>
          <a href="/tutorials/javascript/">Overview</a>
          <a href="/tutorials/javascript/hellopeer.html">Hello Peer</a>
      <a href="/tutorials/javascript/fortune.html">Fortune in JS</a>
      <a href="/tutorials/javascript/security.html">Security in JS</a>
    </nav>
    
        <a href="/tutorials/faq.html">Tutorial FAQ</a>
      </nav>
    
      <a href="#" class="nav">Concepts</a>
      <nav>
        <a href="/concepts/rpc.html">RPC System</a>
    <a href="/concepts/naming.html">Naming</a>
    <a href="/concepts/security.html">Security</a>
    <a href="/concepts/device-management.html">Device Management</a>
    <a href="/concepts/syncbase-overview.html">Syncbase</a>
  </nav>
    
      <a href="/example-apps.html">Example Apps</a>
      <a href="/api-reference.html">API Reference</a>
    
      <a href="#" class="nav">Community</a>
      <nav>
        <a href="/community/coding-guidelines.html">Coding Guidelines</a>
    <a href="/community/contributing.html">Contributing</a>
  </nav>
    
      <a href="#" class="nav">Tools</a>
      <nav>
        <a href="/tools/identity-service-faq.html">Vanadium Identity Service</a>
    <a href="/tools/jiri.html">Jiri</a>
    <a href="/tools/services.html">Vanadium Cloud Services</a>
    <a href="/tools/vanadium-chrome-extension.html">Vanadium Chrome Extension</a>
  </nav>
    
      <a href="#" class="nav">Design Docs</a>
      <nav>
        <a href="/designdocs/authentication.html">Authentication Protocol</a>
    <a href="/designdocs/identity-service.html">Identity Service</a>
    <a href="/designdocs/vdl-spec.html">VDL Specification</a>
    <a href="/designdocs/vom-spec.html">VOM Specification</a>
  </nav>
    
      <a href="/glossary.html">Glossary</a>
      <a href="/faq.html">FAQ</a>
      <a href="/tos.html">Terms of Service</a>
    </div>
    <main>
      <h1 class="title">
        
        Vanadium Chrome Extension
      </h1>

      <div class="toc"></div>

      <p>The <a href="https://chrome.google.com/webstore/detail/jcaelnibllfoobpedofhlaobfcoknpap" title="Vanadium Chrome extension">Vanadium Chrome extension</a> is a bridge between JavaScript web apps and
the Vanadium runtime, libraries, and services.</p>
<p>Support for web applications is a work-in-progress.  Currently, Vanadium web
apps can run only in the Chrome desktop browser with the <a href="https://chrome.google.com/webstore/detail/jcaelnibllfoobpedofhlaobfcoknpap" title="Vanadium Chrome extension">Vanadium Chrome
extension</a> installed.  Mobile browsers and non-Chrome browsers will be
supported in the future.</p>
<h1 id="overview">Overview</h1>
<p>The Vanadium codebase is written mostly in <a href="http://golang.org/" title="The Go Programming Language">Go</a>.  In order to make the Go
libraries accessible to a JavaScript web app, the Vanadium Go code is compiled
into a <a href="https://developer.chrome.com/native-client" title="Native Client">Native Client</a> (NaCl) plugin and embedded in a Chrome extension.</p>
<p><a href="https://developer.chrome.com/native-client" title="Native Client">Native Client</a> is a sandbox for running compiled binary code in
the browser efficiently and securely, independent of the user&#39;s operating
system type.  These plugins can make use of the <a href="https://developer.chrome.com/native-client/c-api" title="Pepper API">Pepper API</a>.</p>
<p>Traditionally, NaCl has supported only C and C++ compilation, but the Vanadium
team has extended the Go compiler to target NaCl and the Pepper API.</p>
<p>The <a href="https://github.com/vanadium/js" title="Vanadium JavaScript">Vanadium JavaScript library</a> provides a set of JavaScript APIs for
interacting with the Vanadium Go code running inside the NaCl plugin in the
extension.</p>
<p>Under the hood, the Vanadium JavaScript library sends messages to the Vanadium
extension, which makes calls to other Vanadium devices in the cloud.  The
extension sends messages back to the web app when those calls return, or when
an external device initiates a call to the JavaScript client.</p>
<p><img src="/images/chrome-extension-overview.svg" alt="Vanadium Chrome extension overview"></p>
<p>Isolating the Vanadium libraries inside a NaCl plugin has the added benefit
that no JavaScript web app ever sees any private keys.  All cryptographic
operations are performed within the extension&#39;s NaCl sandbox.</p>
<h1 id="vanadium-chrome-extension-details">Vanadium Chrome extension details</h1>
<p>The Vanadium extension has two main components:</p>
<ul>
<li>a <a href="https://developer.chrome.com/extensions/content_scripts" title="Content Scripts">content script</a> that runs on each tab, and</li>
<li>a <a href="https://developer.chrome.com/extensions/background_pages" title="Background Pages">background page</a> that runs once per browser and contains JavaScript code and a NaCl plugin.</li>
</ul>
<p>The following diagram depicts these components and the flow of messages between them.</p>
<p><img src="/images/chrome-extension-detail.svg" alt="Vanadium Chrome extension details"></p>
<p>When a web app makes an RPC to a device using the Vanadium JavaScript library,
a message is sent to the content script, which then forwards that message to
the JavaScript running in the background page, and from there the message is
sent to the NaCl plugin.  The NaCl plugin handles incoming messages from
JavaScript by calling Vanadium library code, written in Go.</p>
<p>The NaCl plugin makes Vanadium RPCs to other Vanadium devices using WebSockets,
which are a supported transport protocol of the Vanadium RPC protocol.  Within
the NaCl plugin, each web app origin is associated with a unique <a href="/glossary.html#blessing">Vanadium
blessing</a>, and RPCs are performed with the blessing associated with
the origin of the web app making the request.</p>
<p>The plugin sends messages back to web apps using the same message-passing
system, but in reverse: a message is first sent from NaCl to the background
page JavaScript, then to the content script running on the same tab as the web
app, and finally to the web app.</p>

    </main>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59720824-6', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
